/*
 * Version: $Revision$
 * Date: $Date$
 */

digraph ORDATAMODEL {
  graph [label="Draft OpenRegistry Data Model (3/09)", labelloc="t", labeljust="l", rankdir="LR"]
  node [shape=plaintext, labeljust="l"]

  /*
   * Department Repository cluster
   */
   
  subgraph cluster_DR {
    label = "(DR) Department Repository";
	color = "lightgreen";
	
    /*
     * Department Contacts - broken out separately to allow > 1
     */

    drs_department_contact_records [label=<<table cellborder="1" cellpadding="0" cellspacing="0">
<tr>
 <td bgcolor="yellow" colspan="3"><font point-size="14">drs_department_contact_records</font></td>
</tr>
<tr>
 <td align="left" colspan="3"><font point-size="12">Standardized contact information for a department.</font></td>
</tr>
<tr>
 <td align="left"><font face="Courier" point-size="10">department_id</font></td>
 <td align="left"><font face="Courier" point-size="10">int</font></td>
 <td align="left">Identifier of the associated Department (drd_departments:department_id)</td>
</tr>
<tr>
 <td align="left"><font face="Courier" point-size="10">contact_type</font></td>
 <td align="left"><font face="Courier" point-size="10">char</font></td>
 <td align="left">Type of this Contact: Address, Email, Phone, URL</td>
</tr>
<tr>
 <td align="left"><font face="Courier" point-size="10">contact_id</font></td>
 <td align="left"><font face="Courier" point-size="10">int</font></td>
 <td align="left">Identifier for this Department's Contact (prs_TYPEs:TYPE_id)</td>
</tr>
<tr>
 <td align="left"><font face="Courier" point-size="10">change_id</font></td>
 <td align="left"><font face="Courier" point-size="10">int</font></td>
 <td align="left">Change Identifier (ctx_change_log:id)</td>
</tr>
   </table>>];

    /*
     * Departments
	 */

    drd_departments [label=<<table cellborder="1" cellpadding="0" cellspacing="0">
<tr>
 <td bgcolor="yellow" colspan="3"><font point-size="14">drd_departments</font></td>
</tr>
<tr>
 <td align="left" colspan="3"><font point-size="12">Standardized department information.
 Multiple department hierarchies are possible via department_t.</font></td>
</tr>
<tr>
 <td align="left"><font face="Courier" point-size="10">id</font></td>
 <td align="left"><font face="Courier" point-size="10">int</font></td>
 <td align="left">Identifier of this Department</td>
</tr>
<tr>
 <td align="left"><font face="Courier" point-size="10">department_t</font></td>
 <td align="left"><font face="Courier" point-size="10">int</font></td>
 <td align="left">Type of this Department (ctx_data_types:data_type=department)</td>
</tr>
<tr>
 <td align="left"><font face="Courier" point-size="10">code</font></td>
 <td align="left"><font face="Courier" point-size="10">char(100)</font></td>
 <td align="left">Local code for this Department</td>
</tr>
<tr>
 <td align="left"><font face="Courier" point-size="10">name</font></td>
 <td align="left"><font face="Courier" point-size="10">char(100)</font></td>
 <td align="left">Name of this Department</td>
</tr>
<tr>
 <td align="left"><font face="Courier" point-size="10">locale</font></td>
 <td align="left"><font face="Courier" point-size="10">char</font></td>
 <td align="left">Locale of name</td>
</tr>
<tr>
 <td align="left"><font face="Courier" point-size="10">campus_id</font></td>
 <td align="left"><font face="Courier" point-size="10">int</font></td>
 <td align="left">Identifier for this Department's Campus (prd_campuses:id)</td>
</tr>
<tr>
 <td align="left"><font face="Courier" point-size="10">parent_department_id</font></td>
 <td align="left"><font face="Courier" point-size="10">int</font></td>
 <td align="left">Identifier of this Department's Parent (drd_department:id)</td>
</tr>
<tr>
 <td align="left"><font face="Courier" point-size="10">change_id</font></td>
 <td align="left"><font face="Courier" point-size="10">int</font></td>
 <td align="left">Change Identifier (ctx_change_log:id)</td>
</tr>
   </table>>];	
  } /* cluster_DR */

  /*
   * relations
   *
   * 0/1: odottee
   * 1: teetee
   * 0+: crowodot
   * 1+: crowotee
   *
   * x->y each x has arrowtail y's, each y has arrowhead x's
   *
   */
  
  prd_campuses -> drd_departments [arrowhead="teetee", arrowtail="crowodot"];
  drd_departments -> prd_roles [arrowhead="teetee", arrowtail="crowodot"];
  drs_department_contact_records -> drd_departments [arrowhead="teetee", arrowtail="crowodot"];
  drd_departments -> ctx_change_log [arrowhead="crowotee", arrowtail="teetee"];
  drd_departments -> ctx_data_types [arrowhead="crowodot", arrowtail="teetee"];
  prs_sor_alumni_records -> drd_departments [arrowhead="crowodot", arrowtail="teetee"];
  prs_sor_student_records -> drd_departments [arrowhead="crowodot", arrowtail="teetee"];
}
